from telegram import ReplyKeyboardMarkup, Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes
import os

TOKEN = "7535593360:AAGiGnFKjASPjhP4kd6qIO3U2z_fulQXkOg"

# --- القوائم الرئيسية ---
main_menu = [
    ["📌 الحسابات الرسمية"],
    ["📝 التسجيل في الوكالة"],
    ["📖 معنى التداول", "💻 البرامج"],
    ["💳 الإيداع"]  # تم استبدال الزرين بزر واحد
]

# --- قائمة الإيداع ---
deposit_menu = [
    ["الإيداع إلى OKX", "الإيداع إلى JustMarkets"],
    ["⬅️ رجوع"]
]

# --- الدوال ---

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = ReplyKeyboardMarkup(main_menu, resize_keyboard=True)
    await update.message.reply_text("أهلاً بك في بوت تعليم التداول\nاختر من الأزرار أدناه:", reply_markup=keyboard)

# الحسابات الرسمية
async def accounts(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = """كود الوكالة (الشريك):
f23st0gxc4

رابط قناة التوصيات:
https://t.me/tfbiraq

رابط كروب الدردشة:
https://t.me/+ZYY438_BC7ExYTA6

حسابات علي جليل الرسمية:

telegram: @Ali_jalil199

tiktok: https://www.tiktok.com/@ali_j5lil?_t=ZS-8zLYNJuaVSH&_r=1

instagram: https://www.instagram.com/ali_j5lileng?igsh=ZXZiaGV1a3I4cXA1

youtube: https://www.youtube.com/@alij5lil
"""
    await update.message.reply_text(text)

# التسجيل في الوكالة
async def agency_registration(update: Update, context: ContextTypes.DEFAULT_TYPE):
    reg_menu = [
        ["تحويل وكالة"],
        ["Just Markets"],
        ["⬅️ رجوع"]
    ]
    keyboard = ReplyKeyboardMarkup(reg_menu, resize_keyboard=True)
    await update.message.reply_text("اختر نوع التسجيل:", reply_markup=keyboard)

# --- تحويل الوكالة ---
photo_url = "https://postimg.cc/VS8h9Dd5"
async def transfer_agency (update: Update, context: ContextTypes.DEFAULT_TYPE):
    await context.bot.send_photo(
        chat_id=update.effective_chat.id,
        photo=photo_url,
        caption=""  # نص اختياري تحت الصورة
    )
    text = """طريقة النقل إلى وكالة المهندس علي جليل – وسيط Just Markets  

⚠️ ملاحظة: الانضمام إلى الوكالة اختياري تمامًا، ولا نُجبر أي شخص على ذلك. الهدف من الدخول هو توفير مزايا إضافية وحماية للمتداولين.

✅ فوائد الدخول إلى وكالة المهندس علي جليل

1. الحماية من النصب والتلاعب
– يتم التأكد من أن التداول يجري عبر وسيط رسمي ومعتمد.

2. المسابقات والسحوبات الخاصة
– فرص ربح إضافية مخصصة فقط لأعضاء الوكالة.

3. كاش باك (Cashback)

4. قناة خاصة بالتوصيات
– صفقات إضافية، دعم أقوى، وتحليلات احترافية.

5. بثوث مباشرة وكورسات تعليمية
– دخول إلى جلسات بث خاصة يتم خلالها شرح استراتيجيات عملية والدخول بصفقات مباشرة.

📝 خطوات الانضمام إلى الوكالة

1. تسجيل الدخول عبر الرابط الأول:

اضغط على الرابط:
(https://one.justmarkets.link/a/f23st0gxc4)
قم بإضافة بياناتك:

البريد الإلكتروني (Email)
كلمة المرور (Password)

2. تقديم طلب الانضمام عبر الرابط الثاني:
افتح الرابط:
(https://justmarkets.com/spa/system/partner-change?utm_medium=chat&utm_campaign=link-shared-in-chat&utm_source=livechat.com&utm_content=justmarkets.partners)
املأ بياناتك كما تحب أو يمكنك استخدام المعلومات الافتراضية.

ضع كود الوكالة التالي عند التقديم:
f23st0gxc4

السبب في الانضمام:

"أرغب بالدخول إلى هذا الشريك الجديد بغرض التعليم."

📸 بعد تقديم الطلب

1. التقط صورة شاشة (Screenshot) لصفحة سجل الطلبات.
2. أرسل الصورة إلى أحد المشرفين مع كتابة الرسالة التالية:

دخلت إلى الوكالة ممكن تدخلني القناة الخاصة

3. يُفضل إرسالها إلى جميع المشرفين لسرعة الانضمام:

@Dr_zaid2000  
@Sss90s0  
@fahdawi_97
"""
    await update.message.reply_text(text, disable_web_page_preview=True)

# معنى التداول (أزرار المراحل)
async def trading_meaning(update: Update, context: ContextTypes.DEFAULT_TYPE):
    stages_menu = [
        ["المرحلة 1", "المرحلة 0"],
        ["المرحلة 3", "المرحلة 2"],
        ["المرحلة 5", "المرحلة 4"],
        ["⬅️ رجوع"]
    ]
    keyboard = ReplyKeyboardMarkup(stages_menu, resize_keyboard=True)
    await update.message.reply_text("اختر المرحلة:", reply_markup=keyboard)

# البرامج
async def programs(update: Update, context: ContextTypes.DEFAULT_TYPE):
    prog_menu = [
        ["okx", "Binance"],
        ["Just Markets", "Meta Trader 5"],
        ["Copy Trading Just Markets", "TradingView"],
        ["⬅️ رجوع"]
    ]
    keyboard = ReplyKeyboardMarkup(prog_menu, resize_keyboard=True)
    await update.message.reply_text("اختر برنامج:", reply_markup=keyboard)

# قائمة الإيداع
async def deposit_options(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = ReplyKeyboardMarkup(deposit_menu, resize_keyboard=True)
    await update.message.reply_text("اختر نوع الإيداع:", reply_markup=keyboard)

# الإيداع إلى OKX
async def deposit_okx(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # روابط الصور الثمانية
    photo_urls = [
        "https://i.imgur.com/27ZC9z9.jpeg",  # رابط الصورة 1
        "https://i.imgur.com/Mlihjq1.jpeg",  # رابط الصورة 2
        "https://i.imgur.com/xkaaPcw.jpeg",  # رابط الصورة 3
        "https://i.imgur.com/cD5YTOg.jpeg",  # رابط الصورة 4
        "https://i.imgur.com/5phonYE.jpeg",  # رابط الصورة 5
        "https://i.imgur.com/sH7TJ5o.jpeg",  # رابط الصورة 6
        "https://i.imgur.com/1aBXWrR.jpeg",  # رابط الصورة 7
        "https://i.imgur.com/Blgl8Wv.jpeg"   # رابط الصورة 8
    ]
    
    # إرسال جميع الصور
    for photo_url in photo_urls:
        await context.bot.send_photo(
            chat_id=update.effective_chat.id,
            photo=photo_url
        )
    
    # إرسال النص بعد الصور
    text = """خطوات إيداع USDT عبر البطاقة المصرفية في OKX

1. افتح تطبيق OKX
- اضغط على زر P2P في القائمة الرئيسية.  

2. اختر "شراء USDT"
- من أعلى الشاشة، حدد شراء ثم اختر USDT.  

3. حدد طريقة الدفع
- اضغط على طرق الدفع واختر أحد الخيارات المتاحة للعراق (مثل: **مصرف الرافدين، البنك العراق الأول، زين كاش، إلخ).  
- ملاحظة: إذا كانت العملة المعروضة غير الدينار العراقي (IQD)، غيّرها من أعلى يسار الشاشة إلىIQD. 

4. أدخل المبلغ المراد إيداعه
- اكتب المبلغ بالدينار العراقي (IQD) الذي تريد تحويله إلى USDT.  

5. اختر البائع المناسب  
- اختر بائعًا موثوقًا بناءً على:  
- معدل الإنجاز (يُفضل 98% أو أعلى).  
- عدد المعاملات (كلما زاد العدد، كان أكثر موثوقية).  
- حدود الطلب (تأكد أنها مناسبة لمبلغك).  

6. اضغط على "شراء USDT"
- بعد اختيار البائع، اضغط على شراء USDT للمتابعة.  

7. انتقل إلى دردشة التحويل  
- بعد الضغط على الزر، ستفتح دردشة مباشرة بينك وبين البائع.  
- سيعطيك البائع رقم حسابه المصرفي (بالدينار العراقي) لتحويل المبلغ إليه.  

8. أجرِ التحويل المصرفي 
- استخدم تطبيقك المصرفي (مثل مصرف الرافدين، البنك العراق الأول، إلخ) لتحويل المبلغ بالدينار العراقي إلى الحساب المقدم.  

9. أرسل إثبات التحويل
- بعد إكمال التحويل، التقط صورة لإشعار التحويل وأرسلها عبر الدردشة للبائع كإثبات.  

10. انتظر استلام USDT
    - بعد تأكيد البائع للدفع، سيتم إضافة USDT إلى محفظتك في OKX تلقائيًا.  

ملاحظات مهمة:
- ✅ تأكد من توثيق حسابك في OKX مسبقًا (بالهوية الشخصية أو جواز السفر وبطاقة السكن) لتجنب أي تعطيل.  
- ⏱️ لديك 15 دقيقة فقط لإكمال التحويل بعد فتح الطلب، لذا كن سريعًا.  
- 🔒 لا تترك محادثة الدردشة حتى تتأكد من استلام USDT.  
- 💡 يُفضل استخدام USDT على شبكة TRC20 لتوفير الرسوم وسرعة المعالجة.  

معلومات إضافية:
- إذا واجهت أي مشكلة، تواصل مع دعم OKX عبر التطبيق.  
- لا تتعامل مع بائعين خارج منصة OKX لتجنب الاحتيال."""
    await update.message.reply_text(text)

# الإيداع إلى JustMarkets
async def deposit_justmarkets(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # روابط الصور الستة للإيداع إلى JustMarkets
    photo_urls = [
        "https://i.imgur.com/6ebDSMW.jpeg",  # رابط الصورة 1
        "https://i.imgur.com/eOKQbFR.jpeg",  # رابط الصورة 2
        "https://i.imgur.com/coeU0YJ.jpeg",  # رابط الصورة 3
        "https://i.imgur.com/czeqZBV.jpeg",  # رابط الصورة 4
        "https://i.imgur.com/km0Ex1M.jpeg",  # رابط الصورة 5
        "https://i.imgur.com/SKQ85YF.jpeg"   # رابط الصورة 6
    ]
    
    # إرسال جميع الصور
    for photo_url in photo_urls:
        await context.bot.send_photo(
            chat_id=update.effective_chat.id,
            photo=photo_url
        )
    
    # إرسال النص بعد الصور
    text = """خطوات إيداع USDT إلى JustMarkets

1. الدخول إلى حساب JustMarkets
- سجل الدخول إلى حسابك في منصة JustMarkets عبر التطبيق أو الموقع الإلكتروني.

2. الذهاب إلى قسم الإيداع
- اضغط على زر "الإيداع" أو "Deposit" في الواجهة الرئيسية.

3. اختيار العملة وطريقة الدفع
- اختر USDT كعملة للإيداع.
- حدد شبكة TRC20 (Tron) لتحويل الأموال.

4. نسخ عنوان المحفظة
- انسخ العنوان الذي توفره JustMarkets للإيداع بالضبط كما هو.
- تأكد أن الشبكة محددة كـ TRC20.

5. فتح تطبيق المحفظة أو المنصة المحول منها
- انتقل إلى المنصة التي تملك فيها USDT (مثل OKX، Binance، إلخ).
- اختر "سحب" أو "Withdraw".

6. إدخال تفاصيل السحب
- الصق عنوان محفظة JustMarkets في حقل "العنوان".
- اختر شبكة TRC20 كنوع الشبكة.
- أدخل المبلغ المراد إيداعه.

7. الانتباه إلى الرسوم
- رسوم الشبكة: 2.3 USDT (سيتم خصمها من المبلغ المحول)
- تأكد أن المبلغ الإجمالي يكفي لتغطية الرسوم.

8. تأكيد المعاملة
- راجع جميع التفاصيل بدقة.
- اضغط على "تأكيد" أو "Confirm" لإكمال عملية التحويل.

9. انتظار التوثيق
- انتظر حتى يتم تأكيد المعاملة على الشبكة (عادة من 5-30 دقيقة).
- سيظهر المبلغ في حساب JustMarkets بعد التأكيد.

ملاحظات مهمة:
- ✅ تأكد من تطابق شبكة TRC20 في كل من المرسل والمستقبل
- ⚠️ الرسوم الثابتة: 2.3 USDT تخصم تلقائياً من المبلغ المحول
- 🔒 لا ترسل أي عملة إلى عنوان غير عنوان محفظتك في JustMarkets
- ⏱️ المعاملات على شبكة TRC20 سريعة نسبياً (عادة أقل من 30 دقيقة)
- 💡 احتفظ برقم المعاملة (TxID) لأي استفسارات فنية

تحذير: الإيداع إلى عنوان خاطئ أو على شبكة غير متوافقة قد يؤدي إلى فقدان الأموال بشكل لا يمكن استرداده."""
    await update.message.reply_text(text)

# --- دوال البرامج الجديدة ---
async def okx_program(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # إرسال الفيديو أولاً (استبدل هذا بمعرف الفيديو الفعلي)
    # await update.message.reply_video("https://app.videas.fr/embed/media/9e69b768-18c4-4fbc-8376-d553c74c02e0/")
    # إرسال النص
    text = """برنامج okx

• روابط التحميل:

اندرويد: https://play.google.com/store/apps/details?id=com.okinc.okex.gp

ايفون: https://apps.apple.com/sg/app/okx-buy-bitcoin-btc-crypto/id1327268470

• المتطلبات:
- رقم هاتف فعال.
- ايميل فعال.
- هويتك الشخصية او جواز السفر.
- بطاقة سكن.

نبذة تعريفية عن okx:

هي منصة تداول عالمية متخصصة في العملات الرقمية (Crypto Exchange)، وتُعد من أكبر المنصات من حيث حجم التداول والسيولة. توفر خدماتها لملايين المستخدمين حول العالم بما فيهم المتداولين من العراق.

✅ أهم المميزات:

1. تنوع الأصول الرقمية:
– أكثر من 350 عملة رقمية للتداول مثل:

بيتكوين (BTC/USDT)

إيثيريوم (ETH/USDT)

سولانا (SOL/USDT)

كاردانو (ADA/USDT)

ريبل (XRP/USDT)

2. أنواع التداول:
– Spot Trading: شراء وبيع العملات الرقمية بشكل مباشر.
– Futures: عقود آجلة للتداول بالرافعة المالية.
– Options: تداول الخيارات.
– Earn: استثمار العملات الرقمية للحصول على عوائد (Staking, Savings).

3. طرق الإيداع والسحب:
– دعم للإيداع عبر USDT، Bitcoin، Ethereum وغيرها.
– إمكانية الشراء بالبطاقات المصرفية أو عبر وسطاء محليين.
– مناسبة للعراقيين الذين يعتمدون على USDT (TRC20) للتحويلات.

4. الأمان:
– تحقق ثنائي (2FA).
– نظام أمان لحفظ الأصول في محافظ باردة (Cold Wallets).
– سمعة قوية عالميًا في الحماية.

5. الخدمات الإضافية:
– تطبيق موبايل سهل الاستخدام.
– رسوم تداول منخفضة نسبيًا.
– قسم تعليمي للمبتدئين حول التداول بالعملات الرقمية.

📍 ملاحظة للمتداول العراقي:

يفضل التعامل بالدولار الرقمي USDT على شبكة TRC20 لسرعة التحويل وقلة الرسوم.

لا يُنصح بترك mبالغ كبيرة داخل المنصة لفترة طويلة؛ الأفضل تخزينها في محفظة خارجية لضمان الأمان.
"""
    await update.message.reply_text(text, disable_web_page_preview=True)

async def binance_program(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # await update.message.reply_video("VIDEO_FILE_ID_HERE")
    
    text = """برنامج Binance

• روابط التحميل:

اندرويد: https://play.google.com/store/apps/details?id=com.binance.dev

ايفون: https://apps.apple.com/sg/app/binance-buy-bitcoin-crypto/id1436799971

• المتطلبات:
- رقم هاتف فعال.
- ايميل فعال.
- هويتك الشخصية او جواز السفر.
- بطاقة سكن.

نبذة تعريفية عن Binance:

هي أكبر منصة تداول عملات رقمية في العالم من حيث حجم التداول وعدد المستخدمين، وتُعد الخيار الأول للكثير من المتداولين عالميًا وفي العراق بفضل سهولة الاستخدام وتنوع الخدمات.

✅ أهم المميزات:

1. تنوع الأصول الرقمية:
– تدعم أكثر من 500 عملة رقمية، أبرزها:

بيتكوين (BTC/USDT)

إيثيريوم (ETH/USDT)

بينانس كوين (BNB/USDT)

سولانا (SOL/USDT)

كاردانو (ADA/USDT)

ريبل (XRP/USDT)

2. أنواع التداول:
– Spot Trading: شراء وبيع العملات الرقمية بشكل مباشر.
– Futures: عقود الآجلة برافعة مالية تصل حتى ×125.
– P2P Trading: بيع وشراء مباشر بين الأشخاص باستخدام الدينار العراقي عبر وسطاء.
– Earn: خدمات الادخار والتخزين (Staking – Savings).

3. طرق الإيداع والسحب:
– يمكن الإيداع عبر USDT (TRC20) وهو الأكثر شيوعًا للعراقيين.
– إمكانية الشراء ببطاقات مصرفية في بعض الدول (قد تكون محدودة في العراق).
– التحويل عبر P2P مباشرة مع بائعين محليين.

4. الأمان:
– تحقق ثنائي (2FA) عبر Google Authenticator أو الرسائل النصية.
– نظام SAFU لحماية أموال العملاء في حال حدوث اختراق.
– محفظة Trust Wallet التابعة لبينانس لتخزين الأصول بشكل آمن.

5. الخدمات الإضافية:
– تطبيق موبايل قوي وسهل الاستخدام.
– رسوم منخفضة جدًا خاصة عند الدفع بعملة BNB.
– قسم تعليمي مجاني Binance Academy للمبتدئين.
– دعم خاص للتداول عبر NFTs ومنتجات Web3.

📍 ملاحظة للمتداول العراقي:

يعتبر التداول عبر Binance P2P الطريقة الأنسب لشراء وبيع USDT بالدينار العراقي عبر وسطاء محليين.

يفضل استخدام شبكة TRC20 في التحويلات بسبب رسومها المنخفضة وسرعتها.

ينصح بعدم ترك مبالغ كبيرة داخل المنصة لفترة طويلة والاحتفاظ بها في محفظة خاصة لضمان الأمان.
"""
    await update.message.reply_text(text, disable_web_page_preview=True)

async def justmarkets_program(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # await update.message.reply_video("VIDEO_FILE_ID_HERE")
    
    text = """برنامج JustMarkets Trading

• روابط التحميل:

اندرويد: https://play.google.com/store/apps/details?id=com.justmarkets

ايفون: https://apps.apple.com/sg/app/justmarkets-trade-invest/id1489327144

• المتطلبات:
- رقم هاتف فعال.
- ايميل فعال.
- هويتك الشخصية او جواز السفر.
- بطاقة سكن.

ملاحظة: يتم اكمال جميع الخطوات في الفيديو، ثم تذهب الى زر تحويل الوكالة في بوت November Trading، لتزويدك بخطوات نقل الوكالة.

نبذة تعريفية عن JustMarkets Trading:

هي شركة وساطة عالمية (Broker) مرخصة تقدم خدمات التداول في الأسواق المالية عبر الإنترنت. تعتبر من الوسطاء المعروفين في مجال الفوركس (Forex) والعقود مقابل الفروقات (CFDs)، وتوفر بيئة آمنة وسهلة للمبتدئين والمحترفين.

✅ أهم المميزات:

1. تنوع الأصول المالية:
– تداول الفوركس (أزواج العملات مثل EUR/USD، GBP/USD).
– العملات الرقمية (مثل BTC/USD， ETH/USD).
– المعادن (الذهب XAU/USD، الفضة XAG/USD).
– السلع (النفط الخام WTI، الغاز الطبيعي NG).
– المؤشرات والأسهم العالمية.

2. منصات التداول:
– يدعم منصات MetaTrader 4 (MT4) و MetaTrader 5 (MT5).
– هذه المنصات مشهورة عالميًا وتوفر أدوات للتحليل الفني، المؤشرات، وإدارة الصفقات بسهولة.

3. الانتشار في العراق:
– العديد من المتداولين في العراق يستخدمون JustMarkets لسهولة التسجيل والدعم.
– إمكانية شحن الحساب بالدولار أو USDT عبر وسطاء محليين معتمدين أو محافظ رقمية.

4. الحسابات وأنواعها:
– حسابات تجريبية (Demo) للتدريب بدون مخاطرة.
– حسابات حقيقية متنوعة حسب حجم رأس المال والرافعة المالية.

5. الأمان والموثوقية:
– الشركة مرخصة وتوفر آليات لحماية أموال العملاء.
– تدعم وسائل تحقق مثل التحقق الثنائي (2FA) لحماية الحسابات.

📍 ملاحظة للمتداول العراقي:

لا توفر إيداع مباشر بالدينار العراقي، لكن يمكنك استخدام طرق مثل:

زين كاش

كي كارد مصرف الرافدين

التحويل عبر وسطاء محليين موثوقين

يُنصح دائمًا بالتحويل بمبالغ مدورة (15,000 – 25,000 – 130,500) لتجنب المشاكل القانونية أو الشبهات.
"""
    await update.message.reply_text(text, disable_web_page_preview=True)

async def meta_trader_program(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # await update.message.reply_video("VIDEO_FILE_ID_HERE")
    
    text = """برنامج MetaTrader 5 

• روابط التحميل:

اندرويد: https://play.google.com/store/apps/details?id=net.metaquotes.metatrader5

ايفون: https://apps.apple.com/sg/app/metatrader-5/id413251709

• المتطلبات:
- لا توجد.

نبذة تعريفية عن MetaTrader 5:

هي منصة تداول عالمية مطوّرة من شركة MetaQuotes، وتُعتبر النسخة الأحدث من منصة MetaTrader 4. تُستخدم بشكل واسع من قبل المتداولين في الفوركس والأسواق المالية الأخرى، بما في ذلك العراق، لمرونتها وقوة أدواتها.

✅ أهم المميزات:

1. تنوع الأصول المالية المدعومة:
– الفوركس (Forex): أزواج العملات مثل EUR/USD، GBP/USD.
– المعادن: الذهب (XAU/USD)، الفضة (XAG/USD).
– السلع: النفط الخام (WTI/USD)، الغاز الطبيعي (NG/USD).
– العملات الرقمية (Crypto): BTC/USD， ETH/USD.
– المؤشرات: S&P 500 (US500)، داو جونز (US30)، ناسداك (US100).
– الأسهم العالمية: شركات مثل Apple (AAPL), Tesla (TSLA).

2. الأدوات التحليلية:
– أكثر من 80 مؤشرًا فنيًا ورسوم بيانية متقدمة.
– إمكانية استخدام Trading Robots (Expert Advisors) للتداول الآلي.
– أدوات تحليل أساسي (التقويم الاقتصادي – الأخبار).

3. المرونة في التنفيذ:
– أنواع متعددة من الأوامر (Market, Limit, Stop).
– دعم تداول العقود الآجلة (Futures) والخيارات (Options).
– سرعة تنفيذ عالية.

4. التخصيص وسهولة الاستخدام:
– واجهة تدعم لغات متعددة من ضمنها اللغة العربية.
– متوفر على الحاسوب (Windows/Mac) والجوال (Android/iOS).
– يمكن فتح عدة حسابات على وسطاء مختلفين بنفس التطبيق.

5. الأمان:
– تشفير البيانات وحماية عالية.
– إمكانية ربط الحساب بالتحقق الثنائي (2FA) عبر الوسطاء.

📍 ملاحظة للمتداول العراقي:

هو مجرد منصة وليس وسيط؛ أي يجب ربطه مع وسيط مثل JustMarkets أو Exness لبدء التداول.

التطبيق مجاني، ويمكن تحميله من متجر Google Play أو App Store بسهولة.

مناسب للمبتدئين والمحترفين، ويدعمه معظم الوسطاء الذين يعملون مع العملاء العراقيين.
"""
    await update.message.reply_text(text, disable_web_page_preview=True)

async def copy_trading_program(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # await update.message.reply_video("VIDEO_FILE_ID_HERE")
    
    text = """برنامج JustMarkets CopyTrading

• روابط التحميل:

اندرويد: https://play.google.com/store/apps/details?id=com.justmarkets.copytrading

ايفون: https://apps.apple.com/sg/app/justmarkets-copytrading/id6458742653

• المتطلبات:
- نفس الايميل وكلمة المرور المستخدمة في تطبيق JustMarkets Trading.

نبذة تعريفية عن JustMarkets CopyTrading:

هي خدمة تقدمها شركة الوساطة JustMarkets تتيح للمتداولين المبتدئين أو من لا يملكون خبرة كبيرة في التحليل، متابعة ونسخ صفقات المتداولين المحترفين بشكل تلقائي. الهدف منها هو الاستفادة من خبرة المحترفين وتحقيق أرباح دون الحاجة إلى إدارة الحساب بشكل كامل.

✅ أهم المميزات:

1. آلية العمل:
– يختار المستخدم أحد المتداولين المحترفين (Master Trader) من القائمة.
– يتم نسخ صفقاته بشكل آلي إلى حساب المتابع (Follower).
– يمكن تعديل حجم الصفقات أو إيقاف النسخ في أي وقت.

2. تنوع المتداولين المحترفين:
– قائمة تضم متداولين ذوي استراتيجيات مختلفة.
– إحصائيات واضحة حول: الأرباح، نسبة المخاطرة، مدة التداول.

3. المرونة:
– يمكنك البدء بمبالغ صغيرة.
– التحكم بنسبة رأس المال المخصص للنسخ.
– إمكانية التوقف أو تغيير المتداول في أي لحظة.

4. الفائدة للمحترفين:
– المتداولون المحترفون يمكنهم كسب عمولة إضافية مقابل السماح للآخرين بنسخ صفقاتهم.

5. الدعم في العراق:
– مناسب للمتداولين العراقيين الذين لا يملكون وقتًا أو خبرة كافية.
– يمكن الإيداع عبر USDT أو وسطاء محليين.

📍 ملاحظة للمتداول العراقي:

النسخ لا يعني ضمان الربح بنسبة 100%، فالخسارة واردة كما هي الأرباح.

يُفضل متابعة الأداء لفترة تجريبية قبل تخصيص مبالغ كبيرة.

من الأفضل توزيع رأس المال على أكثر من متداول لتقليل المخاطر.
"""
    await update.message.reply_text(text, disable_web_page_preview=True)

async def tradingview_program(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # await update.message.reply_video("VIDEO_FILE_ID_HERE")
    
    text = """برنامج TradingView

• روابط التحميل:

اندرويد: https://play.google.com/store/apps/details?id=com.tradingview.tradingviewapp

ايفون: https://apps.apple.com/sg/app/tradingview-track-all-markets/id1205990992

• المتطلبات:
- ايميل فعال.

نبذة تعريفية عن TradingView:

هو واحد من أشهر وأقوى المنصات في العالم للتحليل الفني ومتابعة الأسواق المالية. يستخدمه المتداولون في العراق والعالم لمراقبة تحركات الأسعار، رسم المخططات البيانية، ومشاركة الأفكار مع مجتمع من المحللين والمتداولين.

✅ أهم المميزات:

1. تنوع الأسواق المتاحة للمراقبة:
– الفوركس (Forex)
– العملات الرقمية (Crypto)
– الأسهم العالمية (Stocks)
– المؤشرات (Indices)
– السلع والمعادن (Gold, Oil)

2. الرسوم البيانية المتقدمة:
– أكثر من 100 أداة للرسم والتحليل الفني.
– مؤشرات جاهزة مثل RSI, MACD, Bollinger Bands.
– إمكانية إنشاء مؤشرات واستراتيجيات خاصة بلغة Pine Script.

3. الوصول من أي جهاز:
– تطبيق موبايل (Android & iOS).
– نسخة ويب عبر المتصفح بدون الحاجة للتنصيب.

4. خدمة التنبيهات (Alerts):
– تنبيه عبر التطبيق أو البريد عند وصول السعر لمستوى معين.
– يدعم التنبيهات على المؤشرات أيضًا.

5. المجتمع التفاعلي:
– نشر ومتابعة أفكار تداول من محللين حول العالم.
– مشاركة الاستراتيجيات التعليمية مع الآخرين.

6. الاشتراكات:
– حساب مجاني بميزات أساسية.
– حسابات مدفوعة (Pro – Pro+ – Premium) لمزايا متقدمة مثل عدد أكبر من التنبيهات والمخططات.

📍 ملاحظة للمتداول العراقي:

ليس وسيط تداول، بل هو أداة للتحليل فقط.

يمكنك ربطه مع بعض الوسطاء الدوليين (مثل JustMarkets أو Exness) للتنفيذ المباشر من داخل المنصة.

الحساب المجاني يكفي كبداية للمبتدئين في العراق، خاصة للتعلم ومتابعة الأسواق.
"""
    await update.message.reply_text(text, disable_web_page_preview=True)

# --- هندلر الأزرار ---
async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text

    # القائمة الرئيسية
    if text == "📌 الحسابات الرسمية":
        await accounts(update, context)

    elif text == "📖 معنى التداول":
        await trading_meaning(update, context)

    elif text == "💻 البرامج":
        await programs(update, context)

    elif text == "💳 الإيداع":
        await deposit_options(update, context)

    elif text == "📝 التسجيل في الوكالة":
        await agency_registration(update, context)

    elif text == "⬅️ رجوع":
        keyboard = ReplyKeyboardMarkup(main_menu, resize_keyboard=True)
        await update.message.reply_text("🔙 رجعت للقائمة الرئيسية", reply_markup=keyboard)

    elif text == "تحويل وكالة":
        await transfer_agency(update, context)

    # --- أزرار قائمة الإيداع ---
    elif text == "الإيداع إلى OKX":
        await deposit_okx(update, context)

    elif text == "الإيداع إلى JustMarkets":
        await deposit_justmarkets(update, context)

    # --- أزرار قائمة البرامج ---
    elif text == "okx":
        await okx_program(update, context)

    elif text == "Binance":
        await binance_program(update, context)

    elif text == "Just Markets":
        await justmarkets_program(update, context)

    elif text == "Meta Trader 5":
        await meta_trader_program(update, context)

    elif text == "Copy Trading Just Markets":
        await copy_trading_program(update, context)

    elif text == "TradingView":
        await tradingview_program(update, context)

    # --- أزرار قائمة معنى التداول ---
    elif text == "المرحلة 0":
        text0 = """ما هو التداول ولماذا الناس تتداول؟

معنى التداول

التداول (Trading) هو عملية شراء وبيع الأدوات المالية (عملات، أسهم، سلع، معادن، مؤشرات، عملات رقمية...) بهدف تحقيق ربح من فروقات الأسعار.

بمعنى آخر: تشتري بسعر رخيص → تبيع بسعر أعلى = ربح. أو العكس: تبيع بسعر مرتفع (بيع على المكشوف) → تشتري بسعر أقل لاحقًا = ربح.

أهداف التداول

1. تحقيق دخل مالي: بعض المتداولين يتخذونه مهنة، والبعض الآخر يعتبره مصدر دخل إضافي.

2. تنويع مصادر الدخل: لا يعتمد الشخص على راتب فقط.

3. الحماية от التضخم: مثل شراء الذهب بدلًا من تخزين النقود.

4. الاستفادة من تذبذب الأسعار: الأسواق تتحرك دائمًا، وهذه الحركة فرصة للربح.

الفرق بين التداول والاستثمار

الاستثمار: شراء أصل للاحتفاظ به طويلًا (سنوات غالبًا).

التداول: صفقات قصيرة (دقائق، ساعات، أيام).

الفرق بين التداول والتجارة التقليدية

التجارة: بيع وشراء سلع ملموسة (بضاعة).

التداول: بيع وشراء أصول غير ملموسة (عقود، أسهم، عملات).

التداول يعتمد على الإنترنت، الوسطاء، منصات إلكترونية.
"""
        await update.message.reply_text(text0)

    elif text == "المرحلة 1":
        text1 = """الأسواق المالية وأوقات عملها (بتوقيت بغداد UTC+3)

الأسواق المالية هي المنصات اللي يتم فيها تبادل الأصول المالية.

⏰ أوقات الأسواق

1. سوق الفوركس (Forex)
يفتح: الإثنين 12:05 صباحًا
يغلق: السبت 12:00 صباحًا
يعمل 24 ساعة × 5 أيام

الجلسات الرئيسية:
جلسة سيدني: 12:00 صباحًا – 9:00 صباحًا
جلسة طوكيو: 2:00 صباحًا – 11:00 صباحًا
جلسة لندن: 10:00 صباحًا – 7:00 مساءً
جلسة نيويورك: 3:00 مساءً – 12:00 صباحًا

📌 أفضل أوقات التداول: عند تداخل الجلسات (مثل لندن + نيويورك: 3 – 7 مساءً)

2. سوق الأسهم
بورصة نيويورك (NYSE): 4:30 مساءً – 11:00 مساءً
ناسداك (NASDAQ): 4:30 مساءً – 11:00 مساءً
بورصة لندن (LSE): 10:00 صباحًا – 6:30 مساءً
بورصة طوكيو (TSE): 4:30 صباحًا – 11:00 صباحًا

3. سوق السلع والمعادن
يشتغل تقريبًا بنفس أوقات الفوركس (الإثنين – الجمعة)

4. سوق العملات الرقمية (Crypto)
مفتوح 24/7 بدون توقف
"""
        await update.message.reply_text(text1)

    elif text == "المرحلة 2":
        text2 = """أنواع الأسواق والأصول المتداولة

1. سوق الفوركس (Forex)
أكبر سوق مالي بالعالم (6+ تريليون $ يوميًا).
الأصول: أزواج عملات.

• أزواج رئيسية (Majors):
EUR/USD (يورو/دولار)
GBP/USD (جنيه/دولار)
USD/JPY (دولار/ين)
USD/CHF (دولار/فرنك)
AUD/USD (دولار أسترالي/أمريكي)
NZD/USD (دولار نيوزيلندي/أمريكي)
USD/CAD (دولار أمريكي/كندي)

أزواج ثانوية (Crosses):
EUR/GBP – EUR/JPY – GBP/JPY

• أزواج غريبة (Exotics):
USD/TRY – USD/ZAR

2. سوق الأسهم (Stocks)
• شراء حصص ملكية في شركات.
AAPL – آبل
TSLA – تسلا
MSFT – مايكروسوفت
AMZN – أمازون
META – فيسبوك سابقًا
GOOGL – جوجل
NFLX – نتفلكس

3. سوق السلع (Commodities)
• الطاقة:
WTI → النفط الأمريكي
BRENT → نفط برنت
NGAS → الغاز الطبيعي
• الزراعة:
COFFEE → القهوة
SUGAR → السكر
CORN → الذرة
WHEAT → القمح
SOYBEAN → فول الصويا

4. سوق المعادن (Metals)
XAU/USD → الذهب
XAG/USD → الفضة
XPT/USD → البلاتينيوم
XPD/USD → البلاديوم

5. سوق المؤشرات (Indices)
US30 → داو جونز
US500 → S&P 500
NAS100 → ناسداك 100
DAX40 → ألمانيا
FTSE100 → بريطانيا
NIKKEI225 → اليابان
HSI → هونغ كونغ

6. سوق العملات الرقمية (Crypto)
• عملات رئيسية:
BTC/USD – بيتكوين
ETH/USD – إيثريوم
BNB/USD – باينانس
XRP/USD – ريبل
ADA/USD – كاردانو
SOL/USD – سولانا
DOT/USD – بولكادوت
DOGE/USD – دوجكوين
LTC/USD – لايتكوين
• عملات مستقرة:
USDT/USD – تيثر
USDC/USD – USD Coin

7. سوق السندات (Bonds)
US10Y → سندات الخزانة الأمريكية 10 سنوات
DE10Y → سندات ألمانيا 10 سنوات

8. صناديق المؤشرات (ETFs)
SPY → صندوق يتبع S&P 500
GLD → صندوق يتبع الذهب
"""
        await update.message.reply_text(text2)

    elif text == "المرحلة 3":
        text3 = """كيف تتم عملية التداول؟

• الأطراف الأساسية:

1. المتداول: يفتح الصفقات عبر منصة.
2. الوسيط (Broker): مثل JustMarkets، يربطك بالسوق.
3. مزود السيولة: بنوك ومؤسسات مالية عالمية.
4. السوق العالمي: مكان تنفيذ الأوامر.

• خطوات الصفقة:
1. تفتح أمر شراء أو بيع من منصتك.
2. ينتقل الأمر للوسيط.
3. الوسيط يرسله لمزودي السيولة.
4. الصفقة تنفذ في السوق.
5. يظهر الربح أو الخسارة في حسابك.

• كيف يربح الوسيط؟
السبريد (Spread): الفرق بين سعر البيع والشراء.
العمولة (Commission): مبلغ ثابت أو نسبة على الصفقة.

• أدوات أساسية للمتداول:
Stop Loss (وقف الخسارة): يحدد أقصى خسارة.
Take Profit (جني الأرباح): يقفل الصفقة عند ربح معين.
Leverage (الرافعة المالية): التداول برأس مال أكبر، لكنها خطيرة إذا أسيء استخدامها.
"""
        await update.message.reply_text(text3)

    elif text == "المرحلة 4":
        text4 = """تحذيرات وضوابط التداول في العراق

الجزء الأول: الضوابط القانونية للتداول في العراق
1. التداول قانونيًا بشكل شبه رسمي:
العراق يسمح بالتداول في الأسواق المالية بما فيها الفوركس، الأسهم، السلع والعملات الرقمية، وفق الضوابط القانونية.
التعدين الرقمي (Mining) غير مسموح رسميًا ومخالف للقوانين المحلية.

2. الأمان المالي عند التحويل:
عند شراء USDT أو أي عملة رقمية، سواء عن طريق:
- حوالة مصرفية
- بطاقة كي كارد من مصرف الرافدين
- زين كاش
أو طرق دفع أخرى
يجب تحويل المبالغ بالدينار العراقي بدون كسور.

3. أمثلة على المبالغ الصحيحة للتحويل:
15,000 دينار
25,000 دينار
37,000 دينار
130,500 دينار
1,050,000 دينار

4. أمثلة على المبالغ الممنوعة أو المشبوهة:
15,600 دينار
25,850 دينار
37,100 دينار
130,400 دينار
1,050,900 دينار

> هذه المبالغ قد تعرضك للمسائلة القانونية.

5. ملاحظات حول zain cash وبطاقة كي كارد:
عند تحويل مبالغ كبيرة مثل 1,000,000 دينار، قد تتصل شركة Zain للسؤال عن الغرض من التحويل.
يُنصح باستخدام بطاقة مصرفية مثل كي كارد مصرف الرافدين المجانية بالكامل عبر تطبيق (سوبر كي) لتسهيل التحويلات بأمان.

الجزء الثاني: تحذيرات المتداول
1. الحذر من المحتالين والمخادعين:
شبكة من الأشخاص قد تحاول سرقة أموالكم عبر عروض مغرية مثل:
"بونص على حسابك عند الإيداع"
"اعطني حسابك وأديره لك وأربح لك ضعف الرصيد في أسبوع"
"منصة تعدين تربحك أموالاً تلقائيًا"

2. الحذر من القنوات المشبوهة:
تجنب القنوات الخاصة التي تطلب مبالغ مالية للانضمام أو الدخول تحت وكالتها في وسطاء غير معروفين.
يمكنك فقط الانضمام للقنوات المجانية التي توجهك نحو وسطاء معروفين وموثوقين مثل:
JustMarkets
Exness

3. الابتعاد عن التداول العشوائي أو القمار المالي:
لا تدخل في صفقات بدون توصية وتحليل مناسب.
أوقات الأخبار الاقتصادية الكبيرة هي خطرة للمبتدئين؛ لا تدخل الصفقات خلالها.
لمتابعة الأخبار الاقتصادية الموثوقة:
Forex Factory
Investing

4. ممارسات أمان إضافية:
لا تشارك بيانات حسابك مع أي شخص.
تحقق دائمًا من منصات التداول قبل الإيداع.
استخدم كلمات مرور قوية وطرق تحقق ثنائية (2FA).
"""
        await update.message.reply_text(text4)

    elif text == "المرحلة 5":
        text5 = """قوانين وضوابط قناة وكروب المهندس علي جليل

تهدف هذه القوانين إلى ضمان بيئة تداول آمنة واحترافية داخل المجموعة، وحماية المتداولين من المخاطر المالية والاحتيال.

أولًا: تحذيرات خاصة بالمتداولين:
1. عدم التفويض للآخرين:
يُمنع التعامل مع أي شخص يدّعي قدرته على إدارة حسابك أو التداول بالنيابة عنك.
مشاركة بيانات الحساب مع أي شخص خارجي قد تؤدي لفقدان أموالك.

2. الحذر من الادعاءات الوهمية:
لا تتعامل مع أي شخص يطلب أموالًا بزعم أنه مشرف أو إداري في المجموعة.
الإدارة الرسمية لا تطلب أي أموال مباشرة من الأعضاء.

3. تجنب القنوات والخدمات المدفوعة غير الموثوقة:
لا تنضم أو تدفع لأي قنوات VIP أو خدمات مدفوعة خارج إطار المجموعة.
أي عروض خارجية قد تكون احتيالية أو تستهدف سرقة الأموال.

4. الاعتماد على المشرفين المعتمدين فقط:
لا تعتمد على توصيات أو صفقات من أي شخص غير المشرفين الرسميين.
التوصيات الرسمية تأتي فقط من الإدارة لضمان صحتها وأمانها.

5. الحيطة في أوقات الأخبار والتقلبات العالية:
حتى لو كانت التوصيات من مشرفين، يجب الحذر عند الأخبار الاقتصادية الكبيرة.
لمتابعة الأخبار الموثوقة:
Forex Factory
Investing

ثانيًا: ضوابط المشاركة داخل المجموعة:
1. الالتزام بمحتوى التداول فقط:
يُمنع إرسال روابط أو إعادة توجيه رسائل داخل المجموعة.
يُحظر مناقشة مواضيع لا علاقة لها بالتداول.

2. إدارة الصفقات والتوصيات:
لا يحق لأي عضو طرح صفقات أو أوامر تداول من عنده؛ التوصيات الرسمية تصدر فقط عن المشرفين.
يُمنع نشر الخسائر الناتجة عن صفقات شخصية لم يتم إصدارها من الإدارة.
يجب دائمًا التأكد قبل الدخول في أي صفقة من مدى توافقها مع رأس مالك ومستوى خبرتك.

3. منع التداول المالي المباشر داخل المجموعة:
يُمنع طلب الديون أو ممارسة عمليات بيع وشراء العملات داخل المجموعة.

4. استخدام الأدوات والمؤشرات الموثوقة فقط:
يُحظر نشر أي مؤشرات أو أدوات غير معتمدة من قبل الإدارة.

5. التواصل داخل المجموعة:
يُمنع التواصل الخاص مع الأعضاء لأي غرض كان.
الاستثناء الوحيد هو التواصل مع المشرفين عند الضرورة.

6. حظر الحسابات الممولة والبوتات:
لا يُسمح بالنقاش أو الترويج لموضوع الحسابات الممولة.
يمنع منعًا باتًا استخدام أي بوتات، بجميع أنواعها.

7. الترويج الخارجي:
يُحظر الترويج لأي قناة أو جهة أخرى غير تابعة رسميًا للمجموعة.

ملاحظات هامة:
أي مخالفة لهذه القوانين تعرّض العضو للإنذار أو الطرد المباشر من المجموعة.
الهدف من هذه الضوابط هو ضمان بيئة تداول آمنة، احترافية، وخالية من الاحتيال أو التضليل.
الالتزام بالقوانين يحمي الأعضاء ويعزز مصداقية المجموعة.
"""
        await update.message.reply_text(text5)

# --- البوت ---
def main():
    app = Application.builder().token(TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, button_handler))

    print("✅ البوت يشتغل...")
    app.run_polling()

if __name__ == "__main__":
    main()